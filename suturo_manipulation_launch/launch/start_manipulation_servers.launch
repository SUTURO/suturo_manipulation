<launch>
	<arg name="sim" default="false"/>
	<arg name="run_move_gripper_server" default="true"/>
	<arg name="run_grasps_server" default="true"/>
	<arg name="run_percive_server" default="true"/>
	<arg name="run_place_server" default="true"/>
	<arg name="run_object_state_listener" default="true"/>
	<arg name="load_static_objects" default="true"/>

	<group if="$(eval sim == true)">
    	<include file="$(find iai_hsr_sim)/launch/ros_control_sim.launch" />
    	<include file="$(find suturo_manipulation_launch)/launch/giskardpy_hsr.launch" >
        	<arg name="sim" value="true"/>
			<arg name="gui" value="true"/>
		</include>
	</group>
	
	<group if="$(eval sim == false)">
    	<include file="$(find suturo_manipulation_launch)/launch/giskardpy_hsr.launch" >
        	<arg name="sim" value="false"/>
			<arg name="gui" value="true"/>
		</include>
	</group>	
	
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find suturo_manipulation_launch)/config/iai_hsr_sim.rviz" />

	<node pkg="object_state_listener" name="object_state_listener" type="object_state_listener" output="screen"
		  if="$(eval run_object_state_listener == true)">
			<remap from="~object_state" to="/object_state"/>
	</node>

	<node pkg="suturo_manipulation_launch" type="giskard_load_static_objects.py" name="load_static_objects" if="$(eval load_static_objects == true)"/>

	<node pkg="move_gripper_action_server" name="move_gripper_server" type="move_gripper_server.py" output="screen" 
		if="$(eval run_move_gripper_server == true)"/>

	<node pkg="grasps_object_server" name="grasps_server" type="grasps_object_server.py" output="screen" 
		if="$(eval run_grasps_server == true)"/>

	<node pkg="place_action_server" name="place_server" type="place_server.py" output="screen" 
		if="$(eval run_place_server == true)"/>

	<node pkg="perceive_action_server" name="perceive_server" type="perceive_server.py" output="screen" 
		if="$(eval run_percive_server == true)"/>



</launch>
